# Upstart script at /etc/init/ingester.conf

start on runlevel [2345] and stopped cloud-final
stop on runlevel [06]

kill signal SIGINT
kill timeout 600

respawn
respawn limit 10 5

script
  # use su <user> because that makes /etc/environment variables available to subprocess
  exec su root -c /opt/science/rs_ingester/bin/run_ingester.sh
  emit ingester_running
end script
